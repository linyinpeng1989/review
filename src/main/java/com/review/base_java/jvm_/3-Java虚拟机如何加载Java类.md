[《深入拆解 Java 虚拟机》03 | Java虚拟机是如何加载Java类的?](https://time.geekbang.org/column/article/11523)

---

- Java语言的类型可以分为两大类：基本类型（primitive types）和引用类型（reference types）。
    - 基本类型是由Java虚拟机预先定义好的。
    - 引用类型可以细分为四种：类、接口、数组类和泛型参数，其中泛型参数会在编译过程中被擦除，因此Java虚拟机实际上只有前三种引用类型。在类、接口和数组类中，数组类是由Java虚拟机直接生成的，其他两种则有对应的字节流。

- 数组类没有对应的字节流，由Java虚拟机直接生成，不需要进行加载。无论是直接生成的数组类，还是从字节码中加载的类，Java虚拟机都需要对其进行链接和初始化。

- 类的初始化何时会被触发呢？
    - 当虚拟机启动时，初始化用户指定的主类；
    - 当遇到用以新建目标类实例的 new 指令时，初始化 new 指令的目标类；
    - 当遇到调用静态方法的指令时，初始化该静态方法所在的类；
    - 当遇到访问静态字段的指令时，初始化该静态字段所在的类；
    - 子类的初始化会触发父类的初始化；
    - 如果一个接口定义了 default 方法，那么直接实现或者间接实现该接口的类的初始化，会触发该接口的初始化；
    - 使用反射 API 对某个类进行反射调用时，初始化这个类；
    - 当初次调用 MethodHandle 实例时，初始化该 MethodHandle 指向的方法所在的类。


- 如类LazyHolder，新建LazyHolder数组，将会导致LazyHolder加载，但不会导致LazyHolder的链接和初始化。


类加载机制详见：[Java 类加载机制](http://chaser520.iteye.com/admin/blogs/2428347)
